---------------
Release 1.2.1.0
---------------

This is a enhancement release for VIVIPOS Application (VIVIECR) 1.2.0.x

Previous 1.2.0.x releases may be upgraded to this release by installing the release XPI through the Add-on Manager.


------------
Dependencies
------------

This release requires VIVIPOS WebApp and WebServices Release 1.2.1.0. You should also install Release 1.2.1.0 of the appropriate language pack to ensure full translation.


----------
Known bugs
----------

Bug #159:
    Application may wait indefinitely if connection to printer is lost while printing


------------
Enhancements
------------

Bug #17:
    Make 'require table number', and 'require number of customers' flags destination-dependent

Bug #66:
    If a match is not found for a scanning barcode, allow the operator to quickly add the product to the product database by filling in just the product name, tax status, price, and department data

Bug #68:
    A new Table Services layout with Table Selection grid on the main ordering screen is needed

Bug #80:
    A new parameter needs to be added to cash, check, coupon, credit card, giftcard, and currency exchange functions to require entry of tender amount when registering a payment

Bug #85:
    A new option needs to be added to control if number of guests and table number are required when storing an order

Bug #114:
    Need an API function for developers to send text to the internal VFD

Bug #121:
    Need to provide a receipt template for the Japanese ECR market

Bug #124:
    A new option needs to be added to turn off automatic closing of an order when total amount tendered equals or exceeds the amount due

Bug #125:
    Need to be able to register the number of notes (cash, coupon, or giftcard) of a specific denomination tendered for payment

Bug #126:
    Need to be able to provide statistics on payments of specific denominations

Bug #128:
    Need to simplify control panel UI for ECR markets

Bug #130:
    Need to provide a 800x600 to emulate traditional ECRs

Bug #149:
    Need to support Bixolon SRP 350plus printer

Bug #172:
    The ShiftChanges controller needs to fire an event with the shift change record and a end-of-sale-period flag when a shift is successfully closed

Bug #173:
    The Main controller needs to fire a signedOff event with the aclUser object representing the clerk that has been signed off, and a signedOn event with the aclUser object representing the clerk that has signed on

Bug #195:
    Need an Inter-Register Communication (IRC) mechanism to synchronize and distribute non-transactional data and settings among a VIVIPOS cluster

Bug #197:
    Need to allow clerk to offer refund in any combination of payment forms

Bug #201:
    Need a virtual region in the Table Selection grid that filters out tables by available seats

Bug #203:
    Need to allow authorized clerks to override minimum charge requirements on an order

Bug #213:
    Need to be able to print product labels

Bug #214:
    Need to support EPSON TM U200 series printers

Bug #231:
    The Product Returns report needs to be able to query for refund items as well as voided orders, and present the query results in detailed or summary format

Bug #233:
    Need to warn user to restart VIVIPOS application after making changes in localization editor for the changes to take effect

Bug #235:
    If the same item is registered multiple times in sequence, each registration should be displayed as a separate entry if the quantity purchased has been explicitly set

Bug #246:
    The Shift Change report needs to show actual amount tendered in foreign currency in addition to the converted amount in local currency

Bug #264:
    The Product Sales report needs to allow filter and group products by any combination of departments and product groups

Bug #271:
    After an order has been transfered from one table to another, a table transfer check may need to be printed

Bug #281:
    Need to support new built-in VFD with Chinese/Japanese capabilities that displays up to 24 characters per line

Bug #290:
    Annotations need to support preset message list

Bug #291:
    Need a sample 42-column receipt template for the Bixolon SRP 350plus printer

Bug #292:
    When returning items either via Item Refund or Return Item function, the clerk should be able to quickly enter a reason for the return

Bug #293:
    Need to be able to issue an return item check when a cart item has been returned

Bug #297:
    Item registrations need to be time-stamped to allow tracking of customer wait time

Bug #298:
    Need a 'Rush Item' function along with a configurable 'Rush Item' template to be able to issue instructions to kitchen to rush an item

Bug #300:
    Options are needed to filter out negative quantity items and items from previous batches when issuing customer and kitchen checks

Bug #301:
    Need to create new template types for use when 1) making a table transfer, 2) returning a cart item, and 3) rushing a cart item

Bug #317:
    It should be able to configure each VFD to display a default message if the terminal has been idle for a period of time

Bug #318:
    Authorized users may restore user preferences from daily backups via a built-in hot key (ctrl-alt-u)

Bug #319:
    Need to be able to launch control panels directly via programmable function keys and hot keys

Bug #322
    Need to track the price level at which items are registered in order to determine promotion eligibility

Bug #330:
    The basic set of triggers have been updated to support item destination as a filter condition

Bug #357:
    Need a set of administration tools for troubleshooting and managing data recovery in a cluster environment

Bug #376:
    Need to provide separate RTS/CTS and DTR/DSR hardware handshaking options

Bug #378:
    Need a function to quickly recall the last sale and optionally print the receipt or receipt copy

Bug #381:
    Moved Shift-related options into its own 'Shift Control' tab, and added arrow scrollbox around the tabs in General Options to handle the increased number of tabs

----------
Bugs Fixed
----------

Bug #273:
    User is forced to enter table number and number of guests even though the respective options have been turned off

Bug #302:
    When Table Management option 'Require check number' is enabled, no attempt is made to request for a check number when storing or closing an order if the check number has not been successfully assigned when the order was first opened

Bug #305:
    The sample Argox OS-230DT label template mis-prints the current item count when quantity is greater than 9

Bug #311:
    Function customization settings can be overridden by restoring from backups generated on another terminal

Bug #316:
    Disk usage computation is incorrect

Bug #320:
    If an order has a negative balance, the decision on whether the user's check cashing limit has been exceeded is made erroneously

Bug #326:
    When the last tax status is removed, details of the tax being removed remains on the form and the 'Modify' button is not disabled

Bug #333:
    Expired ledger payment records are not removed from database

Bug #374:
    Receipt and ledger do not print in training mode even when configured in general options to do so

Bug #377:
    Storing check does not increment order batchCount if no entries were added to the shopping cart; also batch attribute on recalled items are not reconstructed at all. Both issues may cause template to include items in kitchen/guest checks unnecessarily

Bug #380:
    If a terminal is upgraded from VIVIECR 1.1.x, stock service hostname will be undefined. This causes terminal to display an error message stating that the stock service is unavailable each time the terminal starts up until the stock service hostname is manually set

Bug #382:
    Promotion type 'Cheapest One Free' will only see matching products from the first product group or department for 'Multi Product Group' and 'Multi Department' triggers respectively.

Bug #383:
    Built-in and user-defined hot keys need to be disabled when prompt panels are shown to avoid functions from being invoked via hot keys in inappropriate places

Bug #386:
    When set as the first screen, the Table Selection window does not show up after queueing an order or when a user signs out and the next user signs out

-----------------------------
Bugs fixed in Release 1.2.0.8
-----------------------------

Bug #323:
    Items should not be collapsed together if destinations are different

Bug #324:
    Item destination should be made available as a promotion trigger condition

Bug #325:
    Need a discount-after-n promotion type

Bug #335:
    New options have been added to discountByPercentage to allow exclusion of condiments, non-discountable items, and computation of discount amounts before applying payments

Bug #340:
    Function 'Return Item' should be allow to only return items already registered

Bug #341:
    Condiments should be allowed to have negative prices

Bug #342:
    A display field showing the average item price is needed

Bug #343:
    Updating Order Master record before the record is committing may cause the update to be overwritten

Bug #345:
    Cancelling a recall order does not release lock on the order

Bug #347:
    Traditional layout should not define customerPanelContainer which is extension-dependent

Bug #348:
    Simple Retail layout should not define customerPanelContainer which is extension-dependent

Bug #351:
    Saving order and orderPayments locally for stored orders cause old data to overwrite new data

Bug #352:
    Recalling an order with destination and table number set causes new transaction to be created instead

Bug #353:
    Allow user to select alternative media as source of system recovery data

Bug #355:
    Need to obtain exclusive lock on table when updating local sequences

Bug #360:
    Need to block UI when cancelling orders to prevent users from issuing new commands while we potentially wait for response from remote Order Sequence Service

Bug #361:
    Changed debug level for successful store order operation from WARN to INFO

Bug #362:
    Display of product number, name, and barcode in the Stock Adjustments Report have been changed in the onscreen HTML template from center-justified to left-justified

Bug #364:
    When the table selection panel is not the initial screen, table statuses are not displayed at all when the table selection panel pops up for the first time

Bug #369:
    Shift tax function breaks when no tax configuration exists

Bug #370:
    Transaction created time is updated each time the transaction is stored

-----------------------------
Bugs fixed in Release 1.2.0.7
-----------------------------

Bug #306:
    If two records with the same key are stored in the model backup file using model's saveToBackup() function, fields from the old record will not be updated with fields of the same name from the new record

Bug #307:
    Product Search by product number, barcode, or name fails in Product Management screen

Bug #309:
    Display sorting to collate no case for departments, product groups and products so that departments, product groups, and products will be ordered in a case-insensitive manner in department and product panels

Bug #310:
    On the table selection panel, table name should be shown in the table title section, not in the body

Bug #312:
    Registering items from Product Search screen does not work for set menus

Bug #313:
    Added support for UWE DP series of electronic scales

-----------------------------
Bugs fixed in Release 1.2.0.6
-----------------------------

Bug #270:
    Computation of end of shift balance erroneously includes payment totals from cancelled orders

Bug #274:
    Need to be able to view sales summary at the end of a shift

Bug #275:
    Employee data form flashes to the first user in list at the end of add/modify action

Bug #276:
    Linked group property of stored items not regenerated when recalled, causing kitchen routing to fail when issuing duplicate kitchen checks

Bug #277:
    Sales summary report needs to provide option to ignore or break out set menu items

Bug #278:
    Product sales report needs to provide option to ignore or break out set menu items

Bug #278:
    Product returns report needs to provide option to ignore or break out set menu items

Bug #280:
    On the table selection screen, table totals are not shown correctly when amount is greater or equal to 1000

Bug #282:
    The "Stored order policy when changing shift" dropdown menu in Sign In/Out tab of General Options extends beyond its containing box

Bug #284:
    Changes made by function customizer sometimes require 2 application restarts to take effect

Bug #285:
    If period type of "Time Voided" or "Sale Period Voided" is selected, all selections of order status other than "Voided" is meaningless and should therefore not be shown at all

Bug #286:
    Transaction-level memos should not be indented, otherwise it is difficult to differentiate it from item memos

Bug #287:
    On payment status screen, origin amount for cash payment in local currency is always shown as 0 (zero)

Bug #288:
    Parsing of split payment amount fails because of formatting

Bug #294:
    When the Shift Change report is invoked at the end of a shift or sale period, the search filters should be collapsed to allow better viewing

Bug #295:
    When the Sales Summary report is invoked at the end of a shift or sale period, the search filters should be collapsed to allow better viewing

Bug #303:
    Use a more stable and high performance public server for resolving external IP address

Bug #304:
    Orientation configuration of function panel is over-ridden by Layout's "Place Register Screen on the Left" setting

-----------------------------
Bugs fixed in Release 1.2.0.5
-----------------------------

Bug #202:
    Need a built-in hotkey for signing off

Bug #237:
    POS front end does not get focus on the input line when first power on

Bug #239:
    Only admin users may assign other users to the admin group 

Bug #240:
    Truncate Transaction Records may cause transaction records to be truncated on all synchronized terminals 

Bug #242:
    When confirming refund payments while voiding sale, refund payment amount is switched with original payment amount

Bug #243:
    Region button labels on Table Selection screen are cropped

Bug #244:
    Fixed typo on Custom Sales Report screen ('Destinaltion')

Bug #247:
    Item and order tax entries are duplicated in order_item_taxes each time an order is stored

Bug #249:
    Number of voided orders in Sales Summary Report should be the number of stored/closed orders from the selected time period that have been voided, not the number of orders voided in the selected time period

Bug #250:
    When entering drawer cash amount on signing in a new shift, user should be given opportunity to re-enter cash amount

Bug #251:
    Order Status Repport should allow search by the sale period and shift and actual time when an order is voided. The report should also display void details

Bug #252:
    Computation of fixed-amount add-on included taxes on return items is incorrect

Bug #253:
    Modifying a registered item causes the item to revert to its preset tax status

Bug #254:
    When 'Subtotal' is selected for Promotion type 'Fixed Value', if trigger amount mode is multiple, the fixed subtotal is applied on the sum of all matching items and not on sums of individual sets of matching items

Bug #255:
    In the Detailed Tax Report, order-related totals are tallied once per tax type, leading to incorrect summarization values

Bug #257:
    Cropping of text displayed in onscreen VFD is based on a fixed number of characters regardless of the actual screen resolution (i.e. 12" vs. 15")

Bug #258:
    Product Search should allow browsing by departments/product groups

Bug #259:
    Icon labels in the Employees section of the control panel are cropped on 15" terminals

Bug #261:
    Number of devices should be parameterized

Bug #263:
    Setup Wizard defines obsolete preference 'DefaultLogin'

Bug #265:
    Need visual reminder of current order status

Bug #267:
    Need to ensure that terminal number in Network Services configuration is not blank

Bug #268:
    Table selection screen should not pop up when starting in recovery mode

Bug #269:
    Multiple error message #105's exist

-----------------------------
Bugs fixed in Release 1.2.0.4
-----------------------------

Bug #192:
    Many text messages failed to display using the proper locale due to presence of the symbol ':' in the base text

Bug #193:
    Translation for description of View Order function is wrong (requires 1.2.0.4 language packs)

Bug #194:
    Traditional/Simplified Chinese translations of "Check Cash Limit (0 = no check cashing)" in the "Employees" control panel are incorrect

Bug #196:
    Stock levels are not adjusted when sales are voided

Bug #198:
    Need to be able to trigger minimum charge and other finalization validation procedures both manually (via function key) or automatically (when (pre-)finalizing the order)

Bug #205:
    The built-in install.rdf template used by the package builder does not conform to the new guidelines (<targetApplication> section is out of date)

Bug #206:
    Scrolling the cart one line at a time is too tedious when large number of items have been registered; a new view-based page scrolling mode is now supported

Bug #207:
    Quickly tapping on function 'Return Cart Item' twice will cause the return quantity to be set to 0

Bug #208:
    Revalue computation produces wrong result for policies 'to nearest factor' and 'round to 10 cents (round down 5 cents)' when the transaction total is negative

Bug #209:
    Unable to save promotion rule when trigger type 'Multi Product Group' is selected

Bug #210:
    Remove obsolete preferences

Bug #211:
    Should not display the message 'CANCELLED' when cancelling a recalled open order since the order is actually not cancelled (only that the shopping cart is cleared)

Bug #212:
    Title bar is visible on the ledger entry window, and window size is fixed

Bug #215:
    When an order is stored with annotations, the annotations are duplicated each time the order is re-stored or finalized

Bug #216:
    Function customizer should only be accessible to the superuser

Bug #217:
    Accessing the stock control screen takes an excessive amount of time due to poorly structured SQL query

Bug #218:
    Storing/recalling orders do not work in training mode

Bug #219:
    Updates to a product's "Show on menu" attribute are not immediately reflected in the product panel if the active department is a product group to which the product has been linked

Bug #220:
    Should not be able to truncate transaction records in training mode

Bug #221:
    Translations of the function description for "Product Search" are inaccurate (requires 1.2.0.4 language packs)

Bug #222:
    Unable to exit from Product Group screen after deleting one or more product groups when navigation links have been configured

Bug #223:
    Use of CSS class "groove-thin" for the <separator> tag is deprecated

Bug #224:
    Update of order records by extensions during 'afterSubmit' event may be overwritten

Bug #225:
    Accounts belonging to the built-in "admin" group are used for technical support and should be hidden from the Sign In/Out screen

Bug #226:
    Accounts belonging to the built-in "admin" group are used for technical support and should be hidden from the Clock In/Out screen

Bug #227:
    Need to reduce disk usage to allow system to run with 1GB of storage

Bug #228:
    Translations for some of the report/template headings for the Stock Adjustment Report fail to show up

Bug #229:
    Need to be able to print table number and table region in templates

Bug #230:
    When performing a system restore with system settings, restored CUPS settings do not take effect until the terminal is rebooted

-----------------------------
Bugs fixed in Release 1.2.0.3
-----------------------------

Bug #145:
    Enhanced promotion type 'cheapest one free' to behave consistently regardless of mode ('single', 'more than', or 'multiple')

Bug #155:
    Hotkeys without modifiers intercepted by input line

Bug #156:
    Recalling order into cart can be time-consuming, may need to block UI to force user to wait until order has been fully recalled into the shopping cart

Bug #160:
    Need to be able to rebuild/reset all table statuses and release locked orders if table status is corrupted

Bug #162:
    Payment value in onscreen VFD is not updated when recalling a completed order

Bug #163:
    Label fields too short in 80mm Shift change report template

Bug #164:
    The Product Returns report ignores returned items whose sale unit is not 'unit'

Bug #166:
    Restored Recall By Sequence and Recall By Table functions

Bug #167:
    Newly added bookings are not reflected in Table Selection screen when existing from the bookings screen, and previously booked tables are not precluded from being rebooked for the same time slot

Bug #168:
    Export to PDF and CSV functionalities for Custom Sales, Order Annotations, and Order Status reports are broken

Bug #171:
    Use of the same word 'Number' in different contexts causes translation difficulty

Bug #174:
    Rapidly adding items to cart causes new item to be added with previous item's price and quantity

Bug #179:
    When specifying an absolute index for Scroll Cart function, 0-based index scheme is used instead of the more sensible 1-based index scheme

Bug #181:
    Cluster services should not be dependent on synchronization setting

Bug #182:
    Refund amount should be displayed as a negative value in shift change screenn

Bug #183:
    Table selection screen has a transparent overlay that's bigger than it needs to be, causing areas around the selection screen to be inactive

Bug #184:
    When port number is changed from 80 in network services, cluster services on localhost are no longer accessible

Bug #185:
    superuser account should not be editable by users other than superuser

Bug #187:
    Need an Enter button on the Split payment screen

Bug #188:
    In Table Manage options, the automatic table status cannot be cleared once a status has been selected.

Bug #189:
    Hotkey does not work properly if the linked function has required preset data (i.e. Clear)

Bug #190:
    Input line automatically submits content as barcode whenever it loses focus

-----------------------------
Bugs fixed in Release 1.2.0.2
-----------------------------

Bug #71:
    Sample receipt templates do not format taxes properly

Bug #72:
    Storing a check with payment does not automatically open the cash drawer

Bug #73:
    Upon import of ACL permissions, VARCHAR fields in acl tables may be
    inadvertantly converted to numeric values

Bug #79:
    Employee check cashing limit of 0 is inconsistent with meaning of 0 in
    discount/surcharge limits

Bug #82:
    Taxable amount not restored when order is recalled

Bug #83:
    Backing out of cancelling a stored order leaves cart in an erroneous
    state

Bug #84:
    Merge Table icon not highlighted when selected

Bug #87:
    Void Sale needs to auto-popup Table selection panel if it is first
    window

Bug #88:
    Store check need to support change of number of customers/destinations

Bug #89:
    Can't recall order if previous order in cart

Bug #90:
    Cart display of check payments is inconsistent with other payment types

Bug #91:
    Payment types not localized in shift change screen and in sales summary
    report

Bug #93:
    Sales summary report from end of sale period screen has broken tax
    summaries

Bug #94:
    Groupable payments not correctly localized in shift change reports

Bug #95:
    Models not passed through localization

Bug #98:
    Mass discount & mass surcharge function ACL issues

Bug #100:
    Discount/Surcharge names should not be passed through localization

Bug #101:
    Non-discountable/non-surchargeable checks should be done in cart, not in
    transaction

Bug #103:
    TruncateTxnRecords also delete tables, regions, and table settings

Bug #104:
    View Order screen shows Recall Order button when it should not

Bug #108:
    Need better network error handling when storing orders

Bug #109:
    Added missing functions and localizations to function customizer

Bug #110:
    Virtual Keyboard grabs keyboard focus from user input fields when it pops up

Bug #112:
    Need to block UI when triggering 'Toggle Active' action until the action has completed

Bug #118:
    When order finalization fails on a payment, don't void the last payment entry if the order status is submitted

Bug #119:
    Added ACL for Product Returns report; renamed Product Sales Return to Product Returns

Bug #120:
    Print Document should use ACL of its own

Bug #132:
    Custom Sales Report is broken

Bug #134:
    Shift change start time shown as 1970/01/01 08:00

Bug #138:
    Need to prevent unauthorized users from editing function customization settings directly

Bug #139:
    Device encoding selections are not correctly restored in the device configuration control panel

Bug #140:
    Changing cash drawer 2 type selection in the device configuration control panel has no effect

Bug #141:
    Cart warning text and number of items not cleared when instantiating new transaction

Bug #142:
    Item Subtotal and Add-on Taxes not properly formatted when viewing an open check

Bug #145:
    Promotion Multi-Buy type Value parameter always rounded to Integer; promotion triggers do not always pass matched items with the lowest prices to type

Bug #147:
    When an open order exists in the cart, if the user returns to the table selection screen, transfers the order to another table, exits to the main screen, and finalizes the order, that order will get stuck in the table status server with no opportunity to clear it

Bug #148:
    Table Selection screen should always pop up on cance even if order is already closed

Bug #153:
    When stock adjustment type is 'other', quantity cannot be set to a negative value

Bug #157:
    Sample Kitchen 42c expanded template feeds paper even when there's nothing to print

Bug #158:
    Failed to handle remote sequence number assignment error, allowing orders without valid sequence numbers to be stored or finalized

-----------------------------
Bugs fixed in Release 1.2.0.1
-----------------------------

Bug #70

Sample Argox label template does not check for return items

Bug #76

Scale readings hard-coded at 12.34KG

